@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS Variables for theming */
:root {
  /* Light theme colors */
  --bg: 0 0% 100%;
  --bg-elev1: 210 40% 98%;
  --bg-elev2: 210 40% 96%;
  --text: 222 84% 5%;
  --muted: 215 16% 47%;
  --subtle: 215 20% 65%;
  --accent: 217 91% 60%;
  --success: 142 76% 36%;
  --warn: 38 92% 50%;
  --danger: 0 84% 60%;
  --border: 214 32% 91%;
  --ring: 215 28% 84%;
  --card: 0 0% 100%;
  
  /* Tag colors */
  --tag-impl: 142 76% 36%;
  --tag-presales: 38 92% 50%;
  --tag-signed: 217 91% 60%;
  
  /* Status colors */
  --todo: 215 16% 47%;
  --doing: 217 91% 60%;
  --blocked: 0 84% 60%;
  --done: 142 76% 36%;
  
  /* Other variables */
  --radius: 0.5rem;
  --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --focus: 0 0 0 2px rgb(59 130 246 / 0.5);
}

[data-theme="dark"] {
  /* Dark theme colors - Fixed for better visibility */
  --bg: 240 10% 4%;
  --bg-elev1: 240 6% 10%;
  --bg-elev2: 240 5% 16%;
  --text: 0 0% 98%;
  --muted: 240 5% 65%;
  --subtle: 240 4% 46%;
  --accent: 239 84% 67%;
  --success: 142 76% 36%;
  --warn: 38 92% 50%;
  --danger: 0 84% 60%;
  --border: 240 6% 20%;
  --ring: 240 5% 26%;
  --card: 240 6% 12%;
  
  /* Tag colors */
  --tag-impl: 142 76% 36%;
  --tag-presales: 38 92% 50%;
  --tag-signed: 239 84% 67%;
  
  /* Status colors */
  --todo: 240 5% 65%;
  --doing: 239 84% 67%;
  --blocked: 0 84% 60%;
  --done: 142 76% 36%;
}

/* Additional global styles */
@layer base {
  html {
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  }
  
  body {
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  }
}

@layer components {
  /* Button variants */
  .btn {
    @apply inline-flex items-center justify-center rounded-lg px-4 py-2 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50;
  }
  
  .btn-primary {
    @apply bg-accent text-white hover:opacity-90;
  }
  
  .btn-secondary {
    @apply bg-bg-elev1 text-text hover:bg-bg-elev2 border border-border;
  }
  
  .btn-ghost {
    @apply hover:bg-bg-elev1 hover:text-text;
  }
  
  .btn-danger {
    @apply bg-danger text-white hover:opacity-90;
  }
  
  /* Input styles */
  .input {
    @apply flex h-10 w-full rounded-lg border border-border bg-bg-elev1 px-3 py-2 text-sm ring-offset-bg file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
  }
  
  /* Card styles - Fixed transparency */
  .card {
    @apply rounded-lg border border-border bg-card p-6 shadow-sm;
    background-color: hsl(var(--card)) !important;
    opacity: 1 !important;
  }
  
  /* Tag styles */
  .tag {
    @apply inline-flex items-center rounded-pill px-2.5 py-0.5 text-xs font-medium;
  }
  
  .tag-impl {
    @apply bg-tag-impl/20 text-tag-impl;
  }
  
  .tag-presales {
    @apply bg-tag-presales/20 text-tag-presales;
  }
  
  .tag-signed {
    @apply bg-tag-signed/20 text-tag-signed;
  }
  
  /* Status indicators */
  .status-dot {
    @apply inline-block h-2 w-2 rounded-full;
  }
  
  .status-todo {
    @apply bg-todo;
  }
  
  .status-doing {
    @apply bg-doing;
  }
  
  .status-blocked {
    @apply bg-blocked;
  }
  
  .status-done {
    @apply bg-done;
  }
  
  /* Task row styles */
  .task-row {
    @apply flex items-center gap-3 p-3 rounded-lg border border-transparent hover:border-border hover:bg-bg-elev1 transition-colors;
  }
  
  .task-row.comfortable {
    @apply h-14;
  }
  
  .task-row.compact {
    @apply h-11 p-2;
  }
  
  /* Sidebar styles - Fixed transparency issues */
  .sidebar {
    @apply flex flex-col border-r border-border transition-all duration-200;
    background-color: hsl(var(--bg-elev1)) !important;
    opacity: 1 !important;
    backdrop-filter: none !important;
  }
  
  .sidebar.collapsed {
    @apply w-18;
  }
  
  .sidebar.expanded {
    @apply w-60;
  }
  
  /* Drawer styles - Fixed transparency issues */
  .drawer {
    @apply fixed right-0 top-0 h-full w-120 border-l border-border shadow-lg transform transition-transform duration-200 z-50;
    background-color: hsl(var(--bg-elev1)) !important;
    opacity: 1 !important;
    backdrop-filter: none !important;
  }
  
  .drawer.open {
    @apply translate-x-0;
  }
  
  .drawer.closed {
    @apply translate-x-full;
  }
  
  /* Modal overlay - Fixed dimming issue */
  .modal-overlay {
    @apply fixed inset-0 z-40;
    background-color: rgba(0, 0, 0, 0.5) !important;
    backdrop-filter: blur(2px);
  }
  
  /* Search results container - Fixed transparency */
  .search-results {
    @apply absolute top-full left-0 right-0 mt-1 max-h-96 overflow-y-auto rounded-lg border border-border shadow-lg z-50;
    background-color: hsl(var(--bg-elev1)) !important;
    opacity: 1 !important;
  }
  
  .search-result-item {
    @apply p-3 hover:bg-bg-elev2 cursor-pointer border-b border-border last:border-b-0;
    background-color: transparent;
  }
  
  .search-result-item:hover {
    background-color: hsl(var(--bg-elev2)) !important;
  }
  
  /* Dropdown menus - Fixed transparency */
  .dropdown-menu {
    @apply absolute z-50 min-w-32 rounded-lg border border-border shadow-lg;
    background-color: hsl(var(--bg-elev1)) !important;
    opacity: 1 !important;
  }
  
  .dropdown-item {
    @apply px-3 py-2 text-sm cursor-pointer hover:bg-bg-elev2 first:rounded-t-lg last:rounded-b-lg;
  }
  
  /* Form elements - Better visibility */
  .form-group {
    @apply space-y-2;
  }
  
  .form-label {
    @apply block text-sm font-medium text-text;
  }
  
  .form-input {
    @apply w-full px-3 py-2 border border-border rounded-lg bg-bg-elev1 text-text placeholder-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent;
  }
  
  .form-textarea {
  @apply w-full px-3 py-2 border border-border rounded-lg bg-bg-elev1 text-text placeholder-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent resize-y min-h-20;
  }

  
  .form-select {
    @apply w-full px-3 py-2 border border-border rounded-lg bg-bg-elev1 text-text focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent;
  }
  
  /* Navigation items - Better visibility */
  .nav-item {
    @apply flex items-center gap-3 px-3 py-2 rounded-lg text-muted hover:text-text hover:bg-bg-elev2 transition-colors;
  }
  
  .nav-item.active {
    @apply bg-accent/10 text-accent;
  }
  
  /* Top bar - Fixed transparency */
  .top-bar {
    @apply flex items-center justify-between px-6 py-4 border-b border-border;
    background-color: hsl(var(--bg)) !important;
    opacity: 1 !important;
  }
  
  /* Content area - Proper background */
  .content-area {
    @apply flex-1 overflow-hidden;
    background-color: hsl(var(--bg)) !important;
  }
  
  .content-inner {
    @apply h-full p-6 overflow-y-auto;
  }
  
  /* Scrollbar styles */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--border)) hsl(var(--bg-elev1));
  }
  
  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-track {
    background: hsl(var(--bg-elev1));
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 3px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--ring));
  }
  
  /* Fix for any remaining transparency issues */
  .bg-transparent {
    background-color: transparent !important;
  }
  
  /* Ensure all text is visible */
  .text-transparent {
    color: hsl(var(--text)) !important;
  }
  
  /* Loading states */
  .loading-spinner {
    @apply animate-spin rounded-full h-8 w-8 border-b-2 border-accent;
  }
  
  /* Error states */
  .error-message {
    @apply p-4 rounded-lg bg-danger/10 border border-danger/20 text-danger;
  }
  
  /* Success states */
  .success-message {
    @apply p-4 rounded-lg bg-success/10 border border-success/20 text-success;
  }
  
  /* Warning states */
  .warning-message {
    @apply p-4 rounded-lg bg-warn/10 border border-warn/20 text-warn;
  }
  
  /* Info states */
  .info-message {
    @apply p-4 rounded-lg bg-accent/10 border border-accent/20 text-accent;
  }
}

/* Additional fixes for specific components that might have transparency issues */
.drawer-content {
  background-color: hsl(var(--bg-elev1)) !important;
  opacity: 1 !important;
}

.sidebar-content {
  background-color: hsl(var(--bg-elev1)) !important;
  opacity: 1 !important;
}

.modal-content {
  background-color: hsl(var(--bg-elev1)) !important;
  opacity: 1 !important;
}

.search-input {
  background-color: hsl(var(--bg-elev1)) !important;
  color: hsl(var(--text)) !important;
}

.search-input::placeholder {
  color: hsl(var(--muted)) !important;
}

/* Ensure proper z-index layering */
.z-drawer {
  z-index: 1000;
}

.z-modal {
  z-index: 1100;
}

.z-dropdown {
  z-index: 1200;
}

.z-tooltip {
  z-index: 1300;
}

